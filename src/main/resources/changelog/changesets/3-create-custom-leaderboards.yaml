databaseChangeLog:
  - changeSet:
      id: create custom_leaderboards
      author: Kirill Gnilov
      changes:
        - createTable:
            tableName: custom_leaderboards
            columns:
              - column:
                  name: id
                  type: BIGINT
                  constraints:
                    nullable: false
                    primaryKey: true
                    primaryKeyName: custom_leaderboards_pkey
              - column:
                  name: subscriber_id
                  type: BIGINT
                  constraints:
                    nullable: false
  - changeSet:
      id: autoincrement custom_leaderboards id
      author: Kirill Gnilov
      changes:
        - addAutoIncrement:
            columnName: id
            columnDataType: BIGINT
            tableName: custom_leaderboards
            generationType: IDENTITY
            incrementBy: 1
            startWith: 100
  - changeSet:
      id: create custom_leaderboards_map_info
      author: Kirill Gnilov
      changes:
        - createTable:
            tableName: custom_leaderboards_map_info
            columns:
              - column:
                  name: custom_leaderboards_id
                  type: BIGINT
                  constraints:
                    nullable: false
                    primaryKey: true
                    primaryKeyName: custom_leaderboards_map_info_pkey
              - column:
                  name: map_info_id
                  type: UUID
                  constraints:
                    nullable: false
                    primaryKey: true
                    primaryKeyName: custom_leaderboards_map_info_pkey
  - changeSet:
      id: create custom_leaderboards_player_accounts
      author: Kirill Gnilov
      changes:
        - createTable:
            tableName: custom_leaderboards_player_accounts
            columns:
              - column:
                  name: custom_leaderboard_id
                  type: BIGINT
                  constraints:
                    nullable: false
                    primaryKey: true
                    primaryKeyName: custom_leaderboards_player_accounts_pkey
              - column:
                  name: player_account_id
                  type: UUID
                  constraints:
                    nullable: false
                    primaryKey: true
                    primaryKeyName: custom_leaderboards_map_info_pkey
  - changeSet:
      id: create custom_leaderboards_to_subscribers fkey
      author: Kirill Gnilov
      changes:
        - addForeignKeyConstraint:
            baseColumnNames: subscriber_id
            baseTableName: custom_leaderboards
            constraintName: custom_leaderboards-subscriber_fk
            deferrable: false
            initiallyDeferred: false
            onDelete: NO ACTION
            onUpdate: NO ACTION
            referencedColumnNames: id
            referencedTableName: subscribers
            validate: true
  - changeSet:
      id: create custom_leaderboards_player_accounts fkeys
      author: Kirill Gnilov
      changes:
        - addForeignKeyConstraint:
            baseColumnNames: custom_leaderboard_id
            baseTableName: custom_leaderboards_player_accounts
            constraintName: custom_leaderboards_player_accounts-custom_leaderboards_fk
            deferrable: false
            initiallyDeferred: false
            onDelete: NO ACTION
            onUpdate: NO ACTION
            referencedColumnNames: id
            referencedTableName: custom_leaderboards
            validate: true
        - addForeignKeyConstraint:
            baseColumnNames: player_account_id
            baseTableName: custom_leaderboards_player_accounts
            constraintName: custom_leaderboards_player_accounts-player_accounts_fk
            deferrable: false
            initiallyDeferred: false
            onDelete: NO ACTION
            onUpdate: NO ACTION
            referencedColumnNames: id
            referencedTableName: player_accounts
            validate: true
  - changeSet:
      id: create custom_leaderboards_map_info fkeys
      author: Kirill Gnilov
      changes:
        - addForeignKeyConstraint:
            baseColumnNames: map_info_id
            baseTableName: custom_leaderboards_map_info
            constraintName: custom_leaderboards_map_info-map_info_fk
            deferrable: false
            initiallyDeferred: false
            onDelete: NO ACTION
            onUpdate: NO ACTION
            referencedColumnNames: id
            referencedTableName: map_info
            validate: true
        - addForeignKeyConstraint:
            baseColumnNames: custom_leaderboards_id
            baseTableName: custom_leaderboards_map_info
            constraintName: custom_leaderboards_map_info-custom_leaderboards_fk
            deferrable: false
            initiallyDeferred: false
            onDelete: NO ACTION
            onUpdate: NO ACTION
            referencedColumnNames: id
            referencedTableName: custom_leaderboards
            validate: true
